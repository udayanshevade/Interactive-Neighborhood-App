<!doctype html>
<html>

<head>
  <title>Neighborhood Map</title>
  <meta charset="utf-8">
  <!-- viewport meta tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- inlined main.min.css styles -->
  <style>
    .show-options,.ui-overlay{display:-webkit-flex;display:-ms-flexbox}.ui-overlay,.ui-search{transition:all .3s ease-in-out}.contact-link,.foursquare-link,.yelp-link{text-decoration:none}.infowindow,.infowindow-pic{max-width:100%}html{box-sizing:border-box;font-size:65%}*,:after,:before{box-sizing:inherit}#mapDiv,#mapFallback,body,html{margin:0;width:100%;height:100%}.map-fallback{position:absolute;left:0;top:0;z-index:-1;background-color:#ccc}.fa-spinner{font-size:4rem;position:absolute;z-index:10;top:calc(50% - 2rem);left:calc(50% - 2rem)}.places,.ui-overlay{position:fixed;left:0;background-color:#fff}@-webkit-keyframes spinning{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinning{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loading{-webkit-animation:spinning linear 1s infinite;animation:spinning linear 1s infinite}.dark .map-marker{color:#fff;opacity:.75}.fade{opacity:.5}.ui-overlay{width:100%;top:0;z-index:1;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;box-shadow:1px 2px 6px rgba(0,0,0,.2)}.icon{font-size:1.25rem;padding:1.25rem}.locate-icon{padding-left:.75rem;padding-right:0}.ui-form{margin:0;opacity:.8}.ui-search{font:small-caps 600 1.6rem Roboto,sans-serif;letter-spacing:.1rem;width:90px;border:0;border-bottom:1px solid #333;color:#333;opacity:.2}.search-near{font:small-caps 1.35rem Roboto,sans-serif;padding:0 .5rem}.ui-search:focus{outline:0;opacity:1}.search-button{background-color:#fff;padding-left:1rem;border:0;transition:all .4s ease-in-out}.search-button:focus{outline:0}.places{top:4rem;width:100%;height:calc(100% - 3rem);padding:0;margin:0;box-shadow:0 5px 2px -2px rgba(0,0,0,.2)}.places-icon{transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.filter-button,.ui-filter,.ui-filter-form{transition:all .3s ease-in-out}.expandIcon:before{content:"\f0d7"}.expandIcon{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scaleY(1,-1)}.ui-filter-form{display:block;margin:.5rem auto;padding-left:1rem}.ui-filter{font:small-caps 1.6rem Roboto;width:200px;opacity:.1;border:0;border-bottom:1px solid #333;color:#333}.ui-filter:focus{outline:0;opacity:.8}.show-options{display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.place-header,.place-options{display:-webkit-flex;display:-ms-flexbox}.show-all,.show-favorites{font:small-caps 1.6rem Roboto,sans-serif;letter-spacing:.1rem;text-align:center;cursor:pointer}.places{z-index:2;opacity:.95}.places-list{padding-left:0;height:calc(100% - 11.5rem);overflow-y:auto}.place-list-item{list-style:none;padding:0 0 0 2rem;border-bottom:1px dashed #777}.place-list-item:hover,.placeListItemExpanded{background-color:rgba(245,245,245,.8)}.place-header{display:flex;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:1rem 0}.place-name{font:600 small-caps 1.6rem/2.75rem Roboto,sans-serif;letter-spacing:.52px;letter-spacing:.05rem}.place-rating{display:inline-block;font:600 1.5rem/2.75rem Roboto,sans-serif;padding:.5rem;margin:0 1rem 0 0;border-radius:.5rem}.highRating{background-color:#adff2f}.goodRating{background-color:#9acd32}.averageRating{background-color:khaki}.lowRating{background-color:orange}.badRating{background-color:#8b0000}.place-options{display:flex}.place-icon{line-height:2.75rem}.favorited:before{color:gold}.placeListItemExpanded .marker-icon:before{color:#c40000}.place-info{margin-right:1.5rem;padding:0 2rem}.info-wrapper{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-top:1px dashed #333;border-bottom:1px dotted #ccc}.open-status{display:block;font:1.45rem Roboto,sans-serif}.place-type{display:block;font:small-caps 600 1.45rem Roboto,sans-serif}.contact-text{display:inline-block;font:1.45rem Roboto,sans-serif;letter-spacing:.1rem}.contact-icon{font-size:1.45rem;padding-right:.75rem}.contact-link{font:1.45rem Roboto,sans-serif;display:inline-block;color:#333}.foursquare-link,.info-pic-wrapper{display:-webkit-flex;display:-ms-flexbox}.contact-link:active,.contact-link:focus,.contact-link:hover{color:#333;text-decoration:none}.website-link{font-variant:small-caps;font-size:1.35rem}.website-icon{padding-left:.75rem;padding-right:0}.foursquare-link{display:flex;justify-content:flex-end;color:#333}.icon-text{-ms-flex-item-align:center;-webkit-align-self:center;align-self:center}.foursquare-logo{-ms-flex-item-align:center;-webkit-align-self:center;align-self:center;width:2.5rem}.info-pic-wrapper{margin:2rem 0;display:flex;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.info-pic-container,.login-form{-webkit-justify-content:space-around}.info-pic-container{display:-webkit-flex;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.info-pic-div{width:80%;max-height:150px}.info-pic{display:block;margin:0 auto;max-height:150px}.login-form,.yelp-link{display:-webkit-flex;display:-ms-flexbox}.info-pic-container .fa{padding:1rem;-ms-flex-item-align:center;-webkit-align-self:center;align-self:center}.info-pic-container .fa:before{opacity:.3;transition:opacity .2s ease-in-out}.info-pic-container .fa:hover:before{opacity:1}.yelp-review-wrapper{border-top:1px dotted #ccc;padding:1rem 0}.yelp-title{margin:1rem 0;font:small-caps 1.35rem Roboto,sans-serif}.yelp-review{margin:.5rem 1.5rem 1rem;padding:1rem 1.5rem;font:300 1.35rem/1.5 Roboto,sans-serif;color:#333;letter-spacing:.1rem;border:1px solid rgba(0,0,0,.1);background-color:#fff}.login-wrapper,.settings-wrapper{bottom:2.5rem;padding:1rem 0;position:absolute}.yelp-link{display:flex;justify-content:flex-end;color:#333}.yelp-logo{-ms-flex-item-align:center;-webkit-align-self:center;align-self:center;width:5rem}.places-list::-webkit-scrollbar{width:1.25rem}.places-list::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}.places-list::-webkit-scrollbar-thumb{height:2rem;background-color:#333}.login-wrapper,.mode-button{background-color:transparent}.settings-wrapper{right:1rem}.settings-form{margin:0}.mode-button{border:none;opacity:.7;transition:opacity .2s ease-in-out}.mode-button:active,.mode-button:focus{outline:0}.mode-button:hover{opacity:1}.mode-option{font-size:2.5rem;font-weight:700;width:2.5rem;height:2.5rem}.night-toggle{color:#333}.day-toggle{color:#fff}.login-wrapper{z-index:1;width:5rem;left:1rem;transition:all .3s ease-in-out}.loginWrapperExpand{background-color:#fff;box-shadow:1px 2px 6px rgba(0,0,0,.2);left:0;width:100%}.login-form{display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin-bottom:0}.login-icon{opacity:.7;transition:opacity .2s ease-in-out}.login-icon:hover{opacity:1}.login-icon:before{font-size:2.5rem;color:#333}.dark .login-icon:before{color:#fff}.dark .login-form .login-icon:before{color:#666}.fa-times{padding-left:1.5rem}.login-input{margin:auto 0 auto 1rem;outline:0;border:0;border-bottom:1px solid #666;font:small-caps 1.75rem Roboto,sans-serif}.login-button{background-color:transparent;outline:0;border:0}.fa-sign-in{padding-left:0}.infowindow-title{font:600 small-caps 1.5rem Roboto,sans-serif}.infowindow-price,.infowindow-rating{font:600 1.35rem Roboto,sans-serif}.infowindow-info{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.infowindow-fa{-ms-flex-item-align:center;-webkit-align-self:center;align-self:center}.infowindow-rating{padding-right:1rem}.alert-modal{position:absolute;width:300px;min-height:200px;background-color:#fff;box-shadow:1px 2px 6px rgba(0,0,0,.3);left:calc(50% - 150px);top:-300px;transition:top .3s ease-in-out}.modal-body{padding:1.5rem}.alert{top:calc(50% - 100px)}.alert-title{font:400 small-caps 2rem Roboto,sans-serif}.alert-details{font:400 1.5rem/1.25 Roboto,sans-serif}.alert-close{text-align:right;display:block}.alert-close:before{font-size:1.5rem}@media screen and (min-width:600px){.icon,.ui-search{font-size:1.75rem}.map-marker-hover{opacity:1}.fa:hover{cursor:pointer}.icon{padding:1.5rem}.ui-overlay{width:500px}.ui-search{letter-spacing:.2rem;width:145px;transition:width .3s ease-in-out}.ui-filter{width:250px}.search-button{padding-left:.25rem}.search-near{font-size:1.5rem;padding:0 .75rem}.places{width:500px}.places-list{height:calc(100% - 13rem)}.place-list-item:hover{background-color:rgba(245,245,245,.8);cursor:pointer}.placeListItemExpanded.place-list-item:hover{cursor:default}.placeListItemExpanded .place-header:hover{cursor:pointer}.place-name{display:inline-block;font-size:1.5rem;letter-spacing:.1rem}.info-pic{width:80%}.loginWrapperExpand{width:500px}.login-input{font-size:2rem;margin:.5rem 0}.alert-modal{width:400px;left:calc(50% - 200px)}}
  </style>
</head>

<!-- body -->
<body data-bind="css: { dark: currentMode() }">

  <div id="mapFallback" class="map-fallback" data-bind="visible: !self.map"></div>
  <i class="fa fa-spinner loading" data-bind="visible: loading"></i>
  <!-- map -->
  <div id="mapDiv" class="fade" data-bind="css: { fade: alerting, fade: loading } "></div>

  <!-- location search input -->
  <header class="ui-overlay">
    <form class="ui-form" data-bind="submit: updateSearch">
      <!-- geo location -->
      <i class="icon fa fa-location-arrow locate-icon" data-bind="visible: navigator.geolocation, click: geoLocate" title="Search near you"></i>
      <!-- search button -->
      <button class="icon search-button ui-search-focus" type="submit"><i class="fa fa-search search-icon" title="Search"></i></button>
      <!-- search a term -->
      <input class="ui-search" type="text" data-bind="textInput: searchTerm, hasFocus: !placesExpanded()">

      <span class="search-near">near</span>
      <!-- search a location -->
      <input class="ui-search" type="text" data-bind="textInput: poi">

    </form>
    <!-- expand venues -->
    <i class="icon places-icon fa fa-bars" data-bind="visible: venuesArray().length, click: expandPlaces, css: { expandIcon: placesExpanded() }" title="See Places"></i>
  </header>

  <!-- places section -->
  <section class="places" data-bind="visible: placesExpanded" style="display:none">

    <!-- filter -->
    <header class="ui-filter-form">
      <i class="icon fa fa-filter filter-button" title="Filter"></i>
      <input class="ui-filter" type="text" data-bind="textInput: filterQuery, hasFocus: placesExpanded(), event: { keyup: filterVenues() }">
    </header>

    <div class="show-options">
      <!-- show all venues -->
      <h3 class="show-all" data-bind="click: showAll">show all</h3>
      <!-- show favorite venues -->
      <h3 class="show-favorites" data-bind="click: showFavorites">show favorites</h3>

    </div>

    <!-- venues list -->
    <ul class="places-list" data-bind="foreach: { data: venuesArray, as: 'venue' }">

      <!-- each venue -->
      <li class="place-list-item" data-bind="visible: venue.venueVisible, css: {placeListItemExpanded: venue.venueExpanded}">

        <header class="place-header" data-bind="click: $parent.toggleVenueExpand">

          <div class="place-name-wrapper">
            <!-- venues rating -->
            <h2 class="place-rating" data-bind="text: rating, css: { highRating: rating >= 8.75, goodRating: rating >= 8 && rating < 8.75, averageRating: rating >= 7 && rating < 8, lowRating: rating >= 6 && rating < 7, badRating: rating < 6}"></h2>
            <!-- venues name -->
            <h2 class="place-name" data-bind="text: name"></h2>
          </div>

          <div class="place-options">
            <!-- favorite option -->
            <i class="icon fa fa-star place-icon" data-bind="click: $parent.toggleVenueFavorite, css: { favorited: venue.favorited }" title="Favorite"></i>
            <!-- marker icon -->
            <i class="icon fa fa-map-marker place-icon marker-icon" data-bind="click: $parent.chooseVenue" title="Locate"></i>
          </div>

        </header>

        <!-- expanded venues information -->
        <section class="place-info" data-bind="visible: venue.venueExpanded">
          <!-- place details -->
          <div class="info-wrapper">
            <!-- open status -->
            <h5 class="open-status" data-bind="style: { color: venue.hours.isOpen ? 'green' : 'red' }, text: venue.hours.status"></h5>
            <!-- type of establishment -->
            <h5 class="place-type" data-bind="text: venue.categories[0].name"></h5>

            <!-- place contact info -->
            <div class="contact">
              <!-- venue phone -->
              <h5 class="contact-text" data-bind="if: venue.contact.formattedPhone">
                <a class="contact-link" data-bind="attr: { href: 'tel:' + venue.contact.formattedPhone }">
                  <i class="fa fa-phone contact-icon" title="Call"></i>
                </a>
              </h5>
              <!-- venue link -->
              <h5 class="contact-text" data-bind="if: venue.url">
                <a class="contact-link website-link" target="_blank" data-bind="attr: { href: venue.url }">
                  <i class="fa fa-link contact-icon website-icon" title="Website"></i>
                </a>
              </h5>
            </div>
          </div>

          <!-- venues picture -->
          <div class="info-pic-wrapper">
            <div class="info-pic-container" data-bind="if: venue.photoURL">
              <i class="icon fa fa-caret-left" data-bind="click: function(data) { $parent.cyclePics('backwards', data) }" title="Previous Photo"></i>
              <div class="info-pic-div">
                <img data-bind="attr: { src: venue.photoURL }" alt="venue image" class="info-pic">
              </div>
              <i class="icon fa fa-caret-right" data-bind="click: function(data) { $parent.cyclePics('forwards', data) }" title="Next Photo"></i>
            </div>
          </div>

          <!-- foursquare logo link -->
          <a class="foursquare-link" data-bind="attr: { href: venue.FoursquareURL } " title="Visit Foursquare">
            <i class="fa fa-share contact-icon icon-text"></i>
            <img class="foursquare-logo" src="img/foursquare-logo.svg" alt="Foursquare Logo">
          </a>

          <!-- yelp review -->
          <div class="yelp-review-wrapper" data-bind="visible: venue.review">
            <h6 class="yelp-title">Yelp Review:</h6>
            <p class="yelp-review" data-bind="text: venue.review"></p>
            <a class="yelp-link" data-bind="visible: venue.yelpURL, attr: { href: venue.yelpURL }" title="Visit Yelp">
              <i class="fa fa-share contact-icon icon-text"></i>
              <img class="yelp-logo" src="img/yelp-logo-xsmall@3x.png" alt="Yelp Logo">
            </a>
          </div>
        </section>
      </li>
    </ul>
  </section>

  <!-- login interface -->
  <aside class="login-wrapper" data-bind="css: { loginWrapperExpand: loginExpanded }">
    <button class="mode-button" data-bind="visible: !loginExpanded(), click: toggleLogin">
      <i class="fa fa-user mode-option login-icon" title="Login"></i>
    </button>
    <form class="login-form" data-bind="visible: loginExpanded, submit: login" style="display:none">
      <button type="submit" class="login-button" data-bind="visible: loginExpanded, click: login">
        <i class="fa fa-sign-in login-icon" title="Login"></i>
      </button>
      <!-- login input -->
      <input class="login-input" type="text" data-bind="textInput: user, hasFocus: loginExpanded" placeholder="Create user or Login">
      <button class="login-button" data-bind="click: toggleLogin">
        <i class="fa fa-times login-icon" title="Cancel login"></i>
      </button>
    </form>
  </aside>

  <!-- settings interface -->
  <aside class="settings-wrapper">
    <form class="settings-form">
      <button class="mode-button" data-bind="click: toggleMapMode"><i class="fa fa-moon-o night-toggle mode-option" data-bind="visible: !currentMode()"></i><i class="fa fa-sun-o day-toggle mode-option" data-bind="visible: currentMode() === 'light'"></i>
      </button>
    </form>
  </aside>

  <!-- alert modal -->
  <aside class="alert-modal alert" data-bind="style: { top: alerting() ? 'calc(50% - 100px)' : 'calc(-300px)' } ">
    <div class="modal-body">
      <i class="alert-close fa fa-times" data-bind="click: toggleAlert"></i>
      <h3 class="alert-title" data-bind="text: alertTitle"></h3>
      <h5 class="alert-details" data-bind="text: alertDetails"></h5>
    </div>
  </aside>

  <!-- load scripts -->
  <script>
    var cb = function() {
      var n = document.createElement('link');
      n.rel = 'stylesheet';
      n.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css';
      var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(n, h);
    };
    var raf = requestAnimationFrame || mozRequestAnimationFrame ||
        webkitRequestAnimationFrame || msRequestAnimationFrame;
    if (raf) raf(cb);
    else window.addEventListener('load', cb);
  </script>
  <script src="http://knockoutjs.com/downloads/knockout-3.4.0.js"></script>
  <script src="js/app.min.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArJqPGfKNdtpT73itd-9Wjy1YySnHkDLE&libraries=places&callback=initializeMap"></script>
  <script async defer src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script async defer src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
  <script async defer src="bower_components/oauth-signature/dist/oauth-signature.min.js"></script>
</body>
</html>